<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACT Conversation Steering Demo</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>üé≠ ACT Conversation Steering</h1>
            <p class="subtitle">Affect Control Theory for LLM Response Control</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chat Panel -->
            <section class="chat-panel">
                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        <p>Welcome! Configure identities and start chatting to see ACT steering in action.</p>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <input type="text" id="messageInput" class="chat-input" 
                           placeholder="Type your message..." autocomplete="off">
                    <button id="sendBtn" class="send-btn">Send</button>
                </div>
            </section>

            <!-- Side Panel -->
            <aside class="side-panel">
                <!-- EPA Visualization -->
                <div class="panel-section">
                    <h3>üìä Current EPA</h3>
                    <div class="epa-display">
                        <div class="epa-bar-container">
                            <label>Evaluation</label>
                            <div class="epa-bar">
                                <div class="epa-bar-fill e-bar" id="eBar"></div>
                            </div>
                            <span class="epa-value" id="eValue">0.00</span>
                        </div>
                        <div class="epa-bar-container">
                            <label>Potency</label>
                            <div class="epa-bar">
                                <div class="epa-bar-fill p-bar" id="pBar"></div>
                            </div>
                            <span class="epa-value" id="pValue">0.00</span>
                        </div>
                        <div class="epa-bar-container">
                            <label>Activity</label>
                            <div class="epa-bar">
                                <div class="epa-bar-fill a-bar" id="aBar"></div>
                            </div>
                            <span class="epa-value" id="aValue">0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Metrics -->
                <div class="panel-section">
                    <h3>üìà Metrics</h3>
                    <div class="metrics-grid">
                        <div class="metric">
                            <span class="metric-label">Deflection</span>
                            <span class="metric-value" id="deflectionValue">0.00</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Avg Deflection</span>
                            <span class="metric-value" id="avgDeflectionValue">0.00</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Turns</span>
                            <span class="metric-value" id="turnCount">0</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Error</span>
                            <span class="metric-value" id="errorValue">0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="panel-section">
                    <h3>‚öôÔ∏è Settings</h3>
                    
                    <div class="setting-group">
                        <label>Agent Identity</label>
                        <input type="text" id="agentIdentity" value="assistant" class="setting-input">
                    </div>
                    
                    <div class="setting-group">
                        <label>User Identity</label>
                        <input type="text" id="userIdentity" value="person" class="setting-input">
                    </div>
                    
                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="controllerEnabled" checked>
                            Enable Deflection Controller
                        </label>
                    </div>
                    
                    <div class="setting-group">
                        <label>Context Mode</label>
                        <select id="contextMode" class="setting-input">
                            <option value="turn_by_turn">Turn by Turn</option>
                            <option value="history">History Window</option>
                        </select>
                    </div>
                    
                    <div class="setting-group" id="windowSizeGroup" style="display: none;">
                        <label>Window Size</label>
                        <input type="number" id="windowSize" value="5" min="1" max="20" class="setting-input">
                    </div>
                    
                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="useDecay" checked>
                            Use Decay
                        </label>
                    </div>
                    
                    <div class="setting-group">
                        <label>Decay Rate: <span id="decayRateValue">0.8</span></label>
                        <input type="range" id="decayRate" min="0" max="1" step="0.1" value="0.8" class="slider">
                    </div>
                    
                    <div class="button-group">
                        <button id="applySettings" class="btn-primary">Apply</button>
                        <button id="resetConversation" class="btn-secondary">Reset</button>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
